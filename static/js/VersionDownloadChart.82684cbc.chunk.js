(this["webpackJsonprn-version-tracker"]=this["webpackJsonprn-version-tracker"]||[]).push([[2],{332:function(e,t,n){e.exports={frame:"VersionTooltip_frame__3Lv0n",date:"VersionTooltip_date__1GwoG",versionsList:"VersionTooltip_versionsList__6ks3l",versionsListItem:"VersionTooltip_versionsListItem__1E-df",versionColorIndicator:"VersionTooltip_versionColorIndicator__201KA",versionLabel:"VersionTooltip_versionLabel__2ZozQ",versionCount:"VersionTooltip_versionCount__2olVR"}},333:function(e,t,n){e.exports={versionsListContainer:"VersionLegend_versionsListContainer__2kfsM",versionsList:"VersionLegend_versionsList__gyOfc",versionsListItem:"VersionLegend_versionsListItem__2Sxmb",versionColorIndicator:"VersionLegend_versionColorIndicator__L-tB-",versionLabel:"VersionLegend_versionLabel__1tflT"}},512:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),a=n(330),r=n.n(a);const s={minLuminance:.3},l={maxLuminance:.3},c={saturation:.5,defaultLightness:.5},u={saturation:.7,defaultLightness:.6};const d={};function v(e,t){var n;const o=null!==(n=d[e])&&void 0!==n?n:[];for(const r of o)if(r.targetLuminance===(null===t||void 0===t?void 0:t.targetLuminance)&&r.variant===(null===t||void 0===t?void 0:t.variant))return r.result;const i="dark"===(null===t||void 0===t?void 0:t.variant)?c.saturation:u.saturation,a=`hsl(${e}, ${100*i}%, ${100*function(e,t,n,o){if("contrasts-light"===o)for(;h(t,n,e)>l.maxLuminance;)e-=.02;else if("contrasts-dark"===o)for(;h(t,n,e)<s.minLuminance;)e+=.02;return e}("dark"===(null===t||void 0===t?void 0:t.variant)?c.defaultLightness:u.defaultLightness,e,i,null===t||void 0===t?void 0:t.targetLuminance)}%)`;return o.push({variant:null===t||void 0===t?void 0:t.variant,targetLuminance:null===t||void 0===t?void 0:t.targetLuminance,result:a}),a}function m(e,t){return Math.abs((e-t+.5)%1-.5)}function h(e,t,n){const{r:o,g:i,b:a}=function(e,t,n){const o=(1-Math.abs(2*n-1))*t,i=o*(1-Math.abs(e/60%2-1)),a=n-o/2;let r=0,s=0,l=0;e<60?(r=o,s=i,l=0):e<120?(r=i,s=o,l=0):e<180?(r=0,s=o,l=i):e<240?(r=0,s=i,l=o):e<300?(r=i,s=0,l=o):(r=o,s=0,l=i);return{r:Math.round(255*(r+a)),g:Math.round(255*(s+a)),b:Math.round(255*(l+a))}}(e,t,n);return.2126*f(o/255)+.7152*f(i/255)+.0722*f(a/255)}function f(e){return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}var b=function(){let{theme:e,unit:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{areaChart:{margin:{top:15,right:32,bottom:5}},area:{isAnimationActive:!1,stroke:null!==e&&void 0!==e&&e.isInverted?e.palette.whiteTranslucent40:null===e||void 0===e?void 0:e.palette.blackTranslucent40},responsiveContainer:{width:"100%",height:220},grid:{stroke:null!==e&&void 0!==e&&e.isInverted?e.palette.whiteTranslucent40:null===e||void 0===e?void 0:e.palette.blackTranslucent40,strokeDasharray:"1 1"},xAxis:{height:32,tickLine:!1,tickMargin:10,tick:{fill:null===e||void 0===e?void 0:e.semanticColors.bodyText}},yAxis:{width:80,tickLine:!1,tickMargin:10,tickSize:0,tickCount:5,tick:{fill:null===e||void 0===e?void 0:e.semanticColors.bodyText}},tooltip:{animationDuration:150,animationEasing:"linear",offset:24}}},g=n(332),j=n.n(g),p=n(57),L=n(197),k=n(196),x=n(3);const O=e=>{let{label:t,payload:n,unit:o,versionHues:i,theme:a}=e;const r=[...null!==n&&void 0!==n?n:[]];return r.reverse(),Object(x.jsx)(p.a.Consumer,{children:e=>{var n,s,l;a=null!==(n=a)&&void 0!==n?n:e;const c=r.length>0&&Object(x.jsx)("ul",{className:j.a.versionsList,children:r.map(((e,t)=>{const n=a?v(i[e.name],a.isInverted?{variant:"dark",targetLuminance:"contrasts-dark"}:{variant:"light",targetLuminance:"contrasts-light"}):e.color,r=function(e,t,n){const{versionCounts:o}=t.payload,i=e/Object.values(o).reduce(((e,t)=>e+t),0)*100;return"percentage"===n?Math.round(100*i)/100+"%":`${e.toLocaleString()} (${Math.round(i)}%)`}(e.value,e,o);return Object(x.jsxs)("li",{className:j.a.versionsListItem,children:[Object(x.jsx)("div",{className:j.a.versionColorIndicator,style:{backgroundColor:n}}),Object(x.jsx)(L.a,{variant:"small",className:j.a.versionLabel,children:e.name}),Object(x.jsx)(L.a,{variant:"small",className:j.a.versionCount,children:r})]},t)}))});return Object(x.jsxs)(k.a,{theme:a,className:j.a.frame,style:{backgroundColor:null===(s=null!==(l=a)&&void 0!==l?l:e)||void 0===s?void 0:s.semanticColors.bodyBackground},children:[Object(x.jsx)(L.a,{className:j.a.date,variant:"medium",children:(u=t,new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric"}))}),c]});var u}})};var _=n(503),C=n(504),y=n(490),I=n(491),M=n(495),T=n(326),w=n(496),S=n(509),V=n(42),N=n(333),H=n.n(N);function D(e,t){const n=new Date(e);return n.setHours(0,0,0,0),n.getTime()+t}t.default=e=>{let{history:t,maxDaysShown:n,maxVersionsShown:a,maxTicks:s,showLegend:l,showTooltip:c,unit:u,versionLabeler:d,theme:h,tooltipTheme:f}=e;const g=b({theme:h,unit:u}),[j,k]=Object(o.useState)(),N=i.a.useMemo((()=>function(e,t,n){if(0===e.points.length)return e;const o=e.points[e.points.length-1].date,i=new Date(o).setHours(0,0,0,0)-24*n*60*60*1e3,a={};for(const c of e.points)if(c.date>=i)for(const[e,t]of Object.entries(c.versionCounts)){var r;const n=null!==(r=a[e])&&void 0!==r?r:0;a[e]=n+t}const s=new Set(Object.entries(a).sort(((e,t)=>e[1]-t[1])).slice(-t).map((e=>{let[t,n]=e;return t}))),l=[];for(const c of e.points)if(c.date>=i){const e=Object.keys(c.versionCounts).filter((e=>s.has(e)));if(e.length>0){const t={date:c.date,versionCounts:{}};for(const n of e)t.versionCounts[n]=c.versionCounts[n];l.push(t)}}return{versions:e.versions.filter((e=>s.has(e))),points:l}}(t,null!==a&&void 0!==a?a:5,null!==n&&void 0!==n?n:30)),[t,n,a]),A=i.a.useMemo((()=>function(e,t){if(0===t)return[];const n=e[0],o=e[e.length-1];if(1===t)return[n];if(2===t)return[n,o];const i=o-n,a=t-1;let r=6048e5;for(;Math.floor(i/r)>a;)r*=2;const s=new Set([n]);let l=D(n,r);for(const c of e)c>=l&&(s.add(c),l=D(c,r));return[...s]}(N.points.map((e=>e.date)),null!==s&&void 0!==s?s:6)),[N.points,s]),$=i.a.useMemo((()=>{const e={};let t;return N.versions.forEach((n=>{const{hue:o,avoidToken:i}=function(e,t){var n;const o=r.a.create(e);let i,a=100;do{i=o.random(),i+=.618033988749895,i%=1}while(t&&--a>0&&(m(i,t.adjacentHue)<.4||t.allHues.find((e=>m(i,e)<.06))));return{hue:360*i,avoidToken:{adjacentHue:i,allHues:[...null!==(n=null===t||void 0===t?void 0:t.allHues)&&void 0!==n?n:[],i]}}}(n,t);t=i,e[d?d(n):n]=o})),e}),[N.versions,d]),K=i.a.useMemo((()=>N.versions.map((e=>{const t=d?d(e):e,n=$[t];return{name:t,hue:n,fill:v(n,{variant:null!==h&&void 0!==h&&h.isInverted?"dark":"light",targetLuminance:null!==h&&void 0!==h&&h.isInverted?"contrasts-light":"contrasts-dark"}),dataKey:e}})).reverse()),[N.versions,null===h||void 0===h?void 0:h.isInverted,$,d]);if(0===N.points.length)return null;const E=i.a.memo((F={versionHues:$},e=>{let{payload:t}=e;return Object(x.jsx)(p.a.Consumer,{children:e=>Object(x.jsx)("div",{className:H.a.versionsListContainer,children:Object(x.jsx)("ul",{className:H.a.versionsList,children:t.map((t=>{const n=e?v(F.versionHues[t.value],e.isInverted?{variant:"dark",targetLuminance:"contrasts-dark"}:{variant:"light",targetLuminance:"contrasts-light"}):t.color;return Object(x.jsxs)("li",{className:H.a.versionsListItem,children:[Object(x.jsx)("div",{className:H.a.versionColorIndicator,style:{backgroundColor:n}}),Object(x.jsx)(L.a,{variant:"small",className:H.a.versionLabel,children:t.value})]},t.value)}))})})})}));var F,z;return Object(x.jsxs)("div",{children:[Object(x.jsx)(_.a,{...g.responsiveContainer,children:Object(x.jsxs)(C.a,{...g.areaChart,data:N.points,reverseStackOrder:!0,stackOffset:"percentage"===u?"expand":"none",children:[Object(x.jsx)(y.a,{...g.xAxis,dataKey:"date",type:"number",scale:"time",domain:["dataMin","dataMax"],tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"}),interval:0,ticks:A}),Object(x.jsx)(I.a,{...g.yAxis,type:"number",..."percentage"===u?{domain:[0,1],tickFormatter:e=>`${Math.round(100*e)}%`}:{domain:["auto","auto"],tickFormatter:e=>e.toLocaleString()}}),!1!==c&&Object(x.jsx)(M.a,{...g.tooltip,content:(z={versionHues:$,unit:u,theme:f},e=>Object(x.jsx)(O,{...z,...e}))}),!1!==l&&j&&Object(x.jsx)(T.a,{height:0,content:e=>{let{payload:t}=e;return Object(V.createPortal)(t&&Object(x.jsx)(E,{payload:t}),j)}}),K.map((e=>{let{name:t,fill:n,dataKey:i}=e;return Object(o.createElement)(w.a,{...g.area,name:t,key:t,dataKey:e=>e.versionCounts[i],stackId:"1",fill:n,fillOpacity:1})})),Object(x.jsx)(S.a,{...g.grid})]})}),Object(x.jsx)("div",{ref:e=>k(null!==e&&void 0!==e?e:void 0)})]})}}}]);
//# sourceMappingURL=VersionDownloadChart.82684cbc.chunk.js.map