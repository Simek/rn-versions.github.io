(this["webpackJsonprn-version-tracker"]=this["webpackJsonprn-version-tracker"]||[]).push([[2],{332:function(e,t,n){e.exports={frame:"VersionTooltip_frame__3Lv0n",date:"VersionTooltip_date__1GwoG",versionsList:"VersionTooltip_versionsList__6ks3l",versionsListItem:"VersionTooltip_versionsListItem__1E-df",versionColorIndicator:"VersionTooltip_versionColorIndicator__201KA",versionLabel:"VersionTooltip_versionLabel__2ZozQ",versionCount:"VersionTooltip_versionCount__2olVR"}},333:function(e,t,n){e.exports={versionsListContainer:"VersionLegend_versionsListContainer__2kfsM",versionsList:"VersionLegend_versionsList__gyOfc",versionsListItem:"VersionLegend_versionsListItem__2Sxmb",versionColorIndicator:"VersionLegend_versionColorIndicator__L-tB-",versionLabel:"VersionLegend_versionLabel__1tflT"}},512:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n(330),s=n.n(a);const i={minLuminance:.3},r={maxLuminance:.3},l={saturation:.5,defaultLightness:.5},c={saturation:.7,defaultLightness:.6};function u(e,t){const n="dark"===(null===t||void 0===t?void 0:t.variant)?l.saturation:c.saturation;return`hsl(${e}, ${100*n}%, ${100*function(e,t,n,o){if("contrasts-light"===o)for(;v(t,n,e)>r.maxLuminance;)e-=.02;else if("contrasts-dark"===o)for(;v(t,n,e)<i.minLuminance;)e+=.02;return e}("dark"===(null===t||void 0===t?void 0:t.variant)?l.defaultLightness:c.defaultLightness,e,n,null===t||void 0===t?void 0:t.targetLuminance)}%)`}function d(e,t){return Math.abs((e-t+.5)%1-.5)}function v(e,t,n){const{r:o,g:a,b:s}=function(e,t,n){const o=(1-Math.abs(2*n-1))*t,a=o*(1-Math.abs(e/60%2-1)),s=n-o/2;let i=0,r=0,l=0;e<60?(i=o,r=a,l=0):e<120?(i=a,r=o,l=0):e<180?(i=0,r=o,l=a):e<240?(i=0,r=a,l=o):e<300?(i=a,r=0,l=o):(i=o,r=0,l=a);return{r:Math.round(255*(i+s)),g:Math.round(255*(r+s)),b:Math.round(255*(l+s))}}(e,t,n);return.2126*m(o/255)+.7152*m(a/255)+.0722*m(s/255)}function m(e){return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}var h=function(){let{theme:e,unit:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{areaChart:{margin:{top:15,right:32,bottom:5}},area:{isAnimationActive:!1,stroke:null!==e&&void 0!==e&&e.isInverted?e.palette.whiteTranslucent40:null===e||void 0===e?void 0:e.palette.blackTranslucent40},responsiveContainer:{width:"100%",height:220},grid:{stroke:null!==e&&void 0!==e&&e.isInverted?e.palette.whiteTranslucent40:null===e||void 0===e?void 0:e.palette.blackTranslucent40,strokeDasharray:"1 1"},xAxis:{height:32,tickLine:!1,tickMargin:10,tick:{fill:null===e||void 0===e?void 0:e.semanticColors.bodyText}},yAxis:{width:80,tickLine:!1,tickMargin:10,tickSize:0,tickCount:5,tick:{fill:null===e||void 0===e?void 0:e.semanticColors.bodyText}},tooltip:{animationDuration:150,animationEasing:"linear",offset:24}}},f=n(332),b=n.n(f),j=n(57),g=n(197),p=n(196),L=n(3);const k=e=>{let{label:t,payload:n,unit:o,versionHues:a,theme:s}=e;const i=[...null!==n&&void 0!==n?n:[]];return i.reverse(),Object(L.jsx)(j.a.Consumer,{children:e=>{var n,r,l;s=null!==(n=s)&&void 0!==n?n:e;const c=i.length>0&&Object(L.jsx)("ul",{className:b.a.versionsList,children:i.map(((e,t)=>{const n=s?u(a[e.name],s.isInverted?{variant:"dark",targetLuminance:"contrasts-dark"}:{variant:"light",targetLuminance:"contrasts-light"}):e.color,i=function(e,t,n){const{versionCounts:o}=t.payload,a=e/Object.values(o).reduce(((e,t)=>e+t),0)*100;return"percentage"===n?Math.round(100*a)/100+"%":`${e.toLocaleString()} (${Math.round(a)}%)`}(e.value,e,o);return Object(L.jsxs)("li",{className:b.a.versionsListItem,children:[Object(L.jsx)("div",{className:b.a.versionColorIndicator,style:{backgroundColor:n}}),Object(L.jsx)(g.a,{variant:"small",className:b.a.versionLabel,children:e.name}),Object(L.jsx)(g.a,{variant:"small",className:b.a.versionCount,children:i})]},t)}))});return Object(L.jsxs)(p.a,{theme:s,className:b.a.frame,style:{backgroundColor:null===(r=null!==(l=s)&&void 0!==l?l:e)||void 0===r?void 0:r.semanticColors.bodyBackground},children:[Object(L.jsx)(g.a,{className:b.a.date,variant:"medium",children:(d=t,new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric"}))}),c]});var d}})};var x=n(503),O=n(504),_=n(490),C=n(491),y=n(495),T=n(326),w=n(496),I=n(509),M=n(42),S=n(333),V=n.n(S);function N(e,t){if(0===t)return[];const n=e[0],o=e[e.length-1];if(1===t)return[n];if(2===t)return[n,o];const a=o-n,s=t-1;let i=6048e5;for(;Math.floor(a/i)>s;)i*=2;const r=new Set([n]);let l=H(n,i);for(const c of e)c>=l&&(r.add(c),l=H(c,i));return[...r]}function H(e,t){const n=new Date(e);return n.setHours(0,0,0,0),n.getTime()+t}t.default=e=>{var t,n;let{history:a,maxDaysShown:i,maxVersionsShown:r,maxTicks:l,showLegend:c,showTooltip:v,unit:m,versionLabeler:f,theme:b,tooltipTheme:p}=e;const S=h({theme:b,unit:m}),[H,D]=Object(o.useState)(null);r=null!==(t=r)&&void 0!==t?t:5,i=null!==(n=i)&&void 0!==n?n:30;const A=function(e,t,n){if(0===e.points.length)return e;const o=e.points[e.points.length-1].date,a=new Date(o).setHours(0,0,0,0)-24*n*60*60*1e3,s={};for(const c of e.points)if(c.date>=a)for(const[e,t]of Object.entries(c.versionCounts)){var i;const n=null!==(i=s[e])&&void 0!==i?i:0;s[e]=n+t}const r=new Set(Object.entries(s).sort(((e,t)=>e[1]-t[1])).slice(-t).map((e=>{let[t,n]=e;return t}))),l=[];for(const c of e.points)if(c.date>=a){const e=Object.keys(c.versionCounts).filter((e=>r.has(e)));if(e.length>0){const t={date:c.date,versionCounts:{}};for(const n of e)t.versionCounts[n]=c.versionCounts[n];l.push(t)}}return{versions:e.versions.filter((e=>r.has(e))),points:l}}(a,r,i),$={};let K;const E=A.versions.map((e=>{const{hue:t,avoidToken:n}=function(e,t){var n;const o=s.a.create(e);let a,i=100;do{a=o.random(),a+=.618033988749895,a%=1}while(t&&--i>0&&(d(a,t.adjacentHue)<.4||t.allHues.find((e=>d(a,e)<.06))));return{hue:360*a,avoidToken:{adjacentHue:a,allHues:[...null!==(n=null===t||void 0===t?void 0:t.allHues)&&void 0!==n?n:[],a]}}}(e,K);K=n;const o=f?f(e):e;return $[o]=t,{name:o,hue:t,dataKey:e}})).reverse();if(0===A.points.length)return null;const F=(z={versionHues:$},e=>{let{payload:t}=e;return Object(L.jsx)(j.a.Consumer,{children:e=>Object(L.jsx)("div",{className:V.a.versionsListContainer,children:Object(L.jsx)("ul",{className:V.a.versionsList,children:t.map((t=>{const n=e?u(z.versionHues[t.value],e.isInverted?{variant:"dark",targetLuminance:"contrasts-dark"}:{variant:"light",targetLuminance:"contrasts-light"}):t.color;return Object(L.jsxs)("li",{className:V.a.versionsListItem,children:[Object(L.jsx)("div",{className:V.a.versionColorIndicator,style:{backgroundColor:n}}),Object(L.jsx)(g.a,{variant:"small",className:V.a.versionLabel,children:t.value})]},t.value)}))})})})});var z;const B=null!==b&&void 0!==b&&b.isInverted?"dark":"light";return Object(L.jsxs)("div",{children:[Object(L.jsx)(x.a,{...S.responsiveContainer,children:Object(L.jsxs)(O.a,{...S.areaChart,data:A.points,reverseStackOrder:!0,stackOffset:"percentage"===m?"expand":"none",children:[Object(L.jsx)(_.a,{...S.xAxis,dataKey:"date",type:"number",scale:"time",domain:["dataMin","dataMax"],tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"}),interval:0,ticks:N(A.points.map((e=>e.date)),null!==l&&void 0!==l?l:6)}),Object(L.jsx)(C.a,{...S.yAxis,type:"number",..."percentage"===m?{domain:[0,1],tickFormatter:e=>`${Math.round(100*e)}%`}:{domain:["auto","auto"],tickFormatter:e=>e.toLocaleString()}}),!1!==v&&Object(L.jsx)(y.a,{...S.tooltip,content:(G={versionHues:$,unit:m,theme:p},e=>Object(L.jsx)(k,{...G,...e}))}),!1!==c&&H&&Object(L.jsx)(T.a,{height:0,content:e=>{let{payload:t}=e;return Object(M.createPortal)(t&&Object(L.jsx)(F,{payload:t}),H)}}),E.map((e=>{let{name:t,hue:n,dataKey:a}=e;return Object(o.createElement)(w.a,{...S.area,name:t,key:t,dataKey:e=>e.versionCounts[a],stackId:"1",fill:u(n,{variant:B,targetLuminance:null!==b&&void 0!==b&&b.isInverted?"contrasts-light":"contrasts-dark"}),fillOpacity:1})})),Object(L.jsx)(I.a,{...S.grid})]})}),Object(L.jsx)("div",{ref:e=>D(e)})]});var G}}}]);
//# sourceMappingURL=VersionDownloadChart.c261219f.chunk.js.map